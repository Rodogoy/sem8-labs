Проект представляет собой распределенную систему для взлома хэша под кодовым именем CrackHash. Она производит расчет Md5 хеша методом перебора *(bruteforce)*. Система состоит из двух основных компонентов:
- Manager: Менеджер обрабатывает запрос: генерирует задачи в соответствии с заданным числом воркеров (вычислительных узлов) на перебор слов составленных из алфавита. После чего отправляет их на исполнение воркерам.
- Worker: Каждый воркер принимает задачу, перебирает слова в заданном диапазоне и вычисляет их хэш. Находит слова у которых хеш совпадает с заданным, и результат работы возвращает менеджеру через очередь.

## Сборка проекта

```bash
docker-compose build
```
## Запуск проекта

```bash
docker-compose up
```

## Тестирование системы

Для тестирования запускайте файл Launch.exe из [директории test](test):

в интерфейсе представлено 2 окна, в первом вводится хеш который нужно расшифровать, а во втором вводится максимальная длина изначальной строки. 
## API Endpoints

### Внешние API Manager'a

#### POST /api/hash/crack
Отправка запроса на расшифровку хэша.

Request:
```json
{
    "hash": "88c9f0ae215f0a5bd46e78106a906dd7",
    "maxLength": 5
}
```

Response:
```json
{
    "requestId": "88c9f0ae215f0a5bd46e78106a906dd75"
}
```

#### POST /api/hash/status
Получает статус расшифровки по requestId.

Request:
```json
{
    "requestId": "88c9f0ae215f0a5bd46e78106a906dd75"
}
```
Response:
```json
{
    "status": "READY|PERT_READY|IN_PROGRESS|FAIL",
    "data": ["найденная_строка1", "найденная_строка2(а вдруг)"]
}
```

### Внутренние API Manager'a

#### POST /internal/api/manager/hash/crack/result
Внутренний endpoint для получения результатов от worker'ов.

Request:
```json
{
    "hash": "599dcce2998a6b40b1e38e8c6006cb0a",
    "result": "type",
    "partNumber": 139
}
```

#### POST /internal/api/worker/register
Endpoint для регистрации новых worker'ов в системе.

Request:
```json
{
    "workerName": "worker3",
    "maxWorkers": 1,
    "port": "8083"
}
```

### Worker API

#### POST /internal/api/worker/hash/crack/task
Endpoint для получения заданий на расшифровку от manager'а.

Request:
```json
{
    "hash": "36f3af6226e0b5303e19b824e7442272",
    "maxLength": 2,
    "partNumber": 7,
    "partCount": 100
}
```

## Структура проекта

```
lab1/
├── test/
│   ├─── main.cpp                    # Реализация интерфейса пользователя:
│   └─── Launch.exe                  # Интерфейс пользователя
│                                 
├── manager/
│   ├─── main.hpp                    # Объявление всех классов и структур.
│   ├─── main.cpp                    # Точка входа менеджера. Инициализируются следующие компоненты:
│   │                                очередь задач, глобальное хранилище, балансировщик, диспетчер и сервер.
│   │
│   ├─── rr_balancer.cpp             # Реализация балансировщика задач(Round Robin).
│   ├─── dispatcher.cpp              # Диспетчер, основная задача которого заключается в двух моментах:
│   │                                # 1) распределение полученных задач между воркерами
│   │                                # 2) проверка жизнеспособности воркеров
│   ├─── queue.cpp                   # Очередь задач для диспетчера.
│   │
│   ├─── crack_hash_handler.cpp      # Обработчик для получения запроса на взлом хэша.
│   ├─── result_handler.cpp          # Обработчик для приема результатов от воркеров.
│   ├─── status_handler.cpp          # Обработчик для получения статуса задачи по requestId.
│   ├─── worker_register_handler.cpp # Обработчик регистрации воркеров в системе.
│   │
│   ├─── models.cpp                  # Модели для задания на перебор хэша и результатов.
│   │                                # Вкллючает в себя структуры для хранения состояния задач, преобразования реквестов и статусов, 
│   │                                # и работа с фиксированием статуса задач
│   │
│   └── server.cpp                   # Инициализация HTTP‑сервера, регистрация маршрутов и запуск Listener-a.
│
├── worker/
│   ├─── main.hpp                    # Объявление всех классов и структур.
│   ├─── main.cpp                    # Точка входа воркера. Здесь производится загрузка конфигурации,
│   │                                # регистрация у менеджера и запуск HTTP‑сервера.
│   ├─── config.cpp                  # Загрузка конфигурационных параметров 
│   │                                # (WORKER_URL, PORT) из переменных окружения.
│   │
│   ├─── MD5cracker.cpp              # Конкретная реализация Cracker для MD5 (перебор по алфавиту a-z0-9).
│   ├─── handler_crack_task.cpp      # Обработчик, получающий задания на перебор от менеджера.
│   ├─── crack_task.cpp              # Реализация преобразования реквестов и респозов в json их извлечения из него
│   │
│   ├─── server.cpp                  # Инициализация HTTP‑сервера, регистрация одного маршрута и запуск Listener-a.
│   ├─── registration.cpp            # Оправка запроса на регистрацию воркера в менеджере.
│
├── docker-compose.yml               # Компоновка контейнеров менеджером и несколькими воркерами.
├── Dockerfile.manager               # Dockerfile для сборки образа менеджера.
└── Dockerfile.worker                # Dockerfile для сборки образа воркера.
```
